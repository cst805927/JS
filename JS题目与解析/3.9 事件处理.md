# 3.9 事件处理

## 【真题375】 下列由鼠标触发的事件有

A. click
B.mouseover
C. keydown
D. touchstart

- 答案:AB。
- keydown事件是由键盘触发的，
- touchstart 是一种触摸事件，专门用于移动设备。

## 【真题376】下面是一个按钮，如何在点击类型的事件处理程序中阻止事件传播?

```
<button type="button" id="btn">提交</button>
```

- 答案:
- 事件对象 stopPropagation()方法。
- IE 中的事件对象cancelBubble属性来阻止冒泡传播，

```
var btn = document.getElementById("btn");
btn.onclick = function (eveent) {
    event = event || window.event; // 兼容处理
    event.stopPropagation();
    event.cancelBubble = true;
}
```

## 【真题377】 请封装一个注册事件的函数，要求能够跨浏览器运行。

```
function addHandler(element, type, handler) {
	if (element.addEventListener) { //DOM2
		element.addEventListener(type, handler, false);
	} else if (element.attchEvent) { //IE
		element.attachEvent("on" + type, handler);
	} else { //DOM0
		element["on" + type] = handler;
	}
}

```

- 函数接收3个参数，
  - 第一个参数是事件目标，
  - 第二个参数是事件类型，
  - 第三个参数是事件处理程序。
- 当addEventListener()和 attachEvent()都不支持时，
  - 就采用对象属性的方式注册事件。

## 【真题378】 什么是事件委托?请用一个例子来描述委托。

- 答案:
- 事件委托是一种提高程序性能、降低内存空间的技术手段，
- 它利用了事件冒泡的特性，
- 只需在某个祖先元素上注册一个事件，
  - 就能管理其所有后代元素上同一类型的事件
- 例子

```
<div id="delegation">
	<button type="button">提交</button>
	<button type="button">返回</button>
	<button type="button">重置</button>
</div>

```

- 然后只要给容器元素注册点击事件，
  - 它的3个子元素也就能执行这个点击事件，
- 再通过事件对象的target属性,
  - 就能分辨出当前运行在哪个事件目标上，

```
let container = document.getElementById("delegation");
let handler = (event) => {
    event.target;
}
container.addEventListener("click", handler, false);
```

- 使用委托后就能避免对容器中的每个子元素注册事件，
- 并且如果在容器中动态添加子元素
  - ,新加入的子元素也能使用容器元素上注册的事件，
  - 而不用再单独绑定一次事件处理程序。

## 【真题379】当按下键盘中的B键时,事件对象event 的 keyCode属性返回的值为

A.63
B.64
C.65
D. 66

- 答案:D。
- keyCode属性能够获取键盘中按下的键码，
- B键的键码为66，

## 【真题380】在DOM中，事件对象的两个属性target和 currentTarget有什么区别?

- 答案:
- target属性指向的是事件目标，
- currentTarget属性指向的是正在处理当前事件的对象。
- 例如
- 只给按钮的容器元素注册点击事件,当点击按钮时 , 
  - target 指向的是\<button>元素
  - currentTarget指向的始终是\<div>元素，

```
<div>
    <button type="button" id="btn">按钮</button>
</div>
```

```
let btn = document.getElementById("btn");
btn.parentNode.addEventListener(
	"click",
	function (event) {
		console.log(event.target); //button元素
		console.log(event.currentTarget); //div元素
	},
	false
);

```

## 【真题381】假设下面div元素中的a元素可动态添加，现在要求点击任意的a元素，都能让它的自定义属性 data-digit的值和内容进行拼接，再用 alert()方法输出拼接后的结果。

```
<div id="container">
    <a href="#" data-digit="1">按钮</a>
</div>
```

- 答案:
- 可以采用事件委托的方式，
  - 一次性为所有的a元素绑定点击事件，
- event的 target属性获取当前的事件目标,
- 读取标签名并判断是否是a元素。
- 如果是a元素，
  - 读取它的自定义属性和内容执行拼接操作，
  - 最后用alert()方法输出

```
let container = document.getElementById("container");

container.addEventListener("click", function (event) {
    var element = event.target; // 当前事件目标
    
    if (element.tagName.toLowerCase() !== "a") {
        return;
    }
    
    alert(element.dataset.digit + element.innerText);
    
}, false);

```

## 【真题382】多个选择框联动需要由（）事件实现

A. click
B. blur
C. change
D. keydown

- 答案:C。
- 选择框之间通过改变选中项来实现联动，
  - 除了change事件，其他都不能实现这样的联动。
- click事件会在点击时触发;
- blur事件会在聚焦时触发;
- keydown事件会在按下键盘上的任意键时触发