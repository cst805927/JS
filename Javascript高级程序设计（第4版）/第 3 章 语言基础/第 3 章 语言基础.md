# 第 3 章 语言基础

## 本章内容

- 语法
- 数据类型
- 流控制语句
- 理解函数

## 3.1 语法

### 3.1.1 区分大小写

- ECMAScript 一切都区分大小写

### 3.1.2 标识符

- 标识符是什么？
  - 是变量、函数、属性、函数参数的名字
- 组成标识符的字符有哪些规定？
  - 第一个字符必须是字母、下划线（_）、美元符号（$）
  - 剩下的字符可以是字母、下划线（_）、美元符号（$）、数字

- 标识符的最佳实践是什么？

  - 驼峰大小写形式

    - 第一个单词的首字母小写

      后面每个单词的首字母大写

- 哪些字符不能作为标识符？
  - 关键字
  - 保留字
  - true、false
  - null

### 3.1.3 注释

- ECMAScript注释有哪几种？

  - 单行注释

    ```
    // 单行注释
    ```

  - 块注释

    ```
    /* 这是多行
    注释 */
    ```

### 3.1.4 严格模式

- 严格模式是什么？
  - 是一种 JS 解析和执行模型

- 严格模式的特点是什么？

  - 处理 ECMAScript 3 的一些不规范的写法
  - 对于不安全的活动将抛出错误

- 如何开启严格模式？

  - 在脚本开头加上一行“use strict”

- 选择严格模式的目的是什么？

  - 不破坏 ECMAScript 3 的语法

- 如何单独指定一个函数在严格模式下执行

  - ```
    function doSomeThing () {
    	"use strict";
    	// 函数体
    }
    ```

- 所有现代浏览器都支持严格模式吗？
  - 是的

### 3.1.5 语句

- ECMAScript 中的语句是以什么结尾的？

  - 分号

- 省略分号意味着什么？

  - 意味着由解析器确定语句在哪里结尾

- 加分号由什么好处？

  - 防止省略造成的问题
    - （如避免输入内容不完整）

  - 便于开发者删除空行来压缩代码

    - （如果没有分号，只删除空行，会导致语法错误）

  - 在某些情况下提升性能

    - 因为解析器会尝试

      在合适的位置补上分号

      以纠正语法错误

- 代码块由什么组成？

  - 由一个左花括号（{）开始，

    一个右花括号（}）标识结束

- 控制语句的最佳实践是什么？

  - 始终使用代码块

    即使要执行的只有一条语句

- 使用代码块有什么好处？
  - 让内容更清晰
  - 在修改代码时减少出错的可能性

## 3.2 关键字与保留字

- ECMA-262 保留的关键字有哪些？

  - ```
    break		do			in				typeof
    case		else		instanceof		var
    catch		export		new				void
    class		extends		return			while
    const		finally		super			with
    continue	for			switch			yield
    debugger	function	this
    default		if			throw
    delete		import		try
    ```

- 关键字能否用作标识符或属性名？
  - 不能

- ECMA-262 未来的保留字有哪些？

  - ```
    始终保留：
    enum
    严格模式下保留：
    implements	package		public
    interface	protected	static
    let			private
    模板代码中保留：
    await
    ```

## 3.3 变量

- ECMAScript 变量是什么类型的？
  - 松散类型
    - 变量可以用来保存任何类型的数据
- 变量的是用来做什么的？
  - 用来保存任意值的命名占位符
- 有什么关键字可以声明变量，每个关键字在什么版本中可以使用？
  - var 
    - 所有版本
  - const
    - ES 6 及更晚的版本
  - let
    - ES 6 及更晚的版本

### 3.3.1 var 关键字

- 如何使用 var 操作符定义变量？

  - ```
    var message;
    ```

- 不初始化的情况下，变量会保存什么值？
  - 特殊值 undefined

- 可以同时定义变量并设置它的值吗？

  - 可以

  - ```
    var message = "hi"
    ```

- 可以改变值的类型吗？

  - 可以，但不推荐

  - ```
    var message = "hi"
    message = 100
    ```

#### 1. var 声明作用域

- var 的关键问题是什么？

  - 使用 var 操作符定义的变量

    会成为包含它的函数的局部变量

    - 意味着变量会在函数退出时被销毁

  - ```
    function test() {
    	var messaage = "hi"; // 局部变量
    }
    test();
    console.log(message); // 出错
    ```

- 如何创建一个全局变量？

  - 定义变量时省略 var 操作符

    ```
    function test() {
    	message = "hi"; // 全局变量
    }
    test();
    console.log(message);
    ```

- 为什么不推荐通过省略 var 操作符定义全局变量？

  - 在局部作用域定义的全局变量很难维护

  - 造成困惑

    - 因为不能马上断定

      省略 var 操作符是不是有意为之

  - 在严格模式下

    如果给未声明的变量赋值

    会抛出 ReferenceError 错误

- 如何定义多个变量？

  - 在一条语句用逗号分割每个变量

    ```
    var message = "hi",
    	found = false,
    	age = 29;
    ```

- 在严格模式下，不能定义名字是什么的变量，否则会导致语法错误？
  - eval
  - arguments

#### 2. var 声明提升

- 下面的代码是否会报错？

  ```
  function foo() {
  	console.log(age);
  	var age = 26;
  }
  foo(); // undefined
  ```

  - 不会报错

    - 因为用 var 声明的变量

      会自动提升到函数作用域顶部

- 提升是什么意思？

  - 把所有变量声明

    都拉到函数作用域的顶部

- 能否多次使用 var 声明同一个变量？

  - 能

    ```
    function foo() {
    	var age = 16;
    	var age = 26;
    	var age = 36;
    	console.log(age);
    }
    foo() // 36
    ```

### 3.3.2 let 声明

- let 和 var 的重要区别是什么？

  - let 声明的变量不会在作用域中被提升

  - 声明的范围不同

    - let 声明的范围是块作用域
    - var 声明的范围是函数作用域

    ```
    if (true) {
    	var name = 'Matt';
    	console.log(name); // Matt
    }
    console.log(name); // Matt
    ```

    ```
    if (true) {
    	let age = 26;
    	console.log(age); // 26
    }
    console.log(age); // ReferenceError: age 没有定义
    ```

    - age 的作用域仅限于该块内部

- 块作用域和函数作用域的关系？
  - 块作用域是函数作用域的子集

- 适用于 var 作用域限制是否适用于 let ？
  - 是
  - 因为块作用域是函数作用域的子集

- let 是否允许同一个块作用域中出现冗余声明？

  - 不允许

    ```
    var name;
    var name;
    ```

    ```
    let age;
    let age; // SyntaxError：标识符age已经声明过了
    ```

- 嵌套使用相同的标识符是否会报错？

  - 不会

    - 因为同一个块中没有重复声明

    ```
    var name = 'Nicholas';
    console.log(name); // 'Nicholas'
    if (true) {
    	var name = 'Matt';
    	console.log(name); // 'Matt'
    }
    ```

    ```
    let age = 10;
    console.log(age); // 10
    if (true) {
    	let age = 26;
    	console.log(age) // 26
    }
    ```

- let 和 var 声明的是什么？

  - 指出变量在相关作用域如何存在

  ```
  var name;
  let name; // SyntaxError
  ```

  ```
  let age;
  var age; // SyntaxError
  ```

#### 1.  暂时性死区

- let 和 var 的重要区别是什么？

  - 声明的范围不同

    - let 声明的范围是块作用域
    - var 声明的范围是函数作用域

  - let 声明的变量不会在作用域中被提升

    ```
    // name会被提升
    console.log(name); // undefined
    var name = 'Matt';
    ```

    ```
    // age不会被提升
    console.log(age); // ReferenceError:age没有定义
    let age = 26;
    ```

- 什么是“暂时性死区”？
  - 在 let 声明之前的执行瞬间
- 在“暂时性死区”阶段引用任何后面才声明的变量会发生什么？
  - 抛出 ReferenceError

#### 2. 全局声明

- var 和 let 有什么区别？

  - 声明的范围不同

    - let 块作用域
    - var 函数作用域

  - 提升

    - let 不会提升
    - var 会提升

  - 全局作用域中声明的变量是否会成为 window 对象的属性

    - let 不会

    - var 会

    ```
    var name = 'Matt';
    console.log(window.name); // 'Matt'
    ```

    ```
    let age = 26;
    console.log(window.age); // undefined
    ```

#### 3. 条件声明

- 使用 var 冗余声明时，JS 引擎会怎么做？

  - 会将多余的声明在作用域顶部

    合并为一个声明

    - 因为声明会被提升

- let 会不会检查前面是否声明过同名变量？
  - 不会
    - 因为 let 的作用域是块
- let 有没有可能在没有声明的情况下声明变量
  - 不可能
  - 因为 let 的作用域是块